---
ms.assetid: d7a4d2e1-217d-4ffc-93f0-817149bd9e7f
title: Esposizione a possibili violazioni
description: ''
author: MicrosoftGuyJFlo
ms.author: joflore
manager: mtillman
ms.date: 05/31/2017
ms.topic: article
ms.prod: windows-server
ms.technology: identity-adds
ms.openlocfilehash: b2233a638aa0a422d5792f8c949c46ac8de099ba
ms.sourcegitcommit: 07c9d4ea72528401314e2789e3bc2e688fc96001
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/29/2020
ms.locfileid: "76822044"
---
# <a name="avenues-to-compromise"></a>Esposizione a possibili violazioni

>Si applica a: Windows Server 2016, Windows Server 2012 R2, Windows Server 2012

*Legge numero 7: la rete più sicura è un sistema ben amministrato.* - [10 leggi non modificabili dell'amministrazione della sicurezza](https://technet.microsoft.com/library/cc722488.aspx)  
  
Nelle organizzazioni in cui si sono verificati eventi di compromissione catastrofici, le valutazioni in genere rivelano che le organizzazioni hanno una visibilità limitata sullo stato effettivo delle infrastrutture IT, che potrebbero differire significativamente dalle "come documentate". Stati. Queste varianze introducono vulnerabilità che espongono l'ambiente alla compromissione, spesso con scarso rischio di individuazione fino a quando il compromesso non è stato raggiunto fino al momento in cui gli utenti malintenzionati hanno effettivamente "proprietario" dell'ambiente.  
  
Valutazioni dettagliate della configurazione di servizi di dominio Active Directory di queste organizzazioni, infrastrutture a chiave pubblica (PKI), server, workstation, applicazioni, elenchi di controllo di accesso (ACL) e altre tecnologie rivelano errate configurazioni e vulnerabilità che, se correzione, potrebbe aver impedito la compromissione iniziale.  
  
L'analisi della documentazione, dei processi e delle procedure IT identifica le vulnerabilità introdotte da Gap nelle procedure amministrative sfruttate da utenti malintenzionati per ottenere i privilegi usati per compromettere in modo completo la foresta Active Directory. Una foresta completamente compromessa è una foresta in cui gli utenti malintenzionati compromettono non solo i singoli sistemi, le applicazioni o gli account utente, ma escalano l'accesso per ottenere un livello di privilegio in cui possono modificare o distruggere tutti gli aspetti della foresta. Quando un'installazione di Active Directory è stata compromessa a tale livello, gli utenti malintenzionati possono apportare modifiche che consentono loro di mantenere una presenza in tutto l'ambiente o peggio, eliminare la directory e i sistemi e gli account gestiti.  
  
Sebbene alcune delle vulnerabilità comunemente sfruttate nelle descrizioni seguenti non siano attacchi contro Active Directory, consentono agli utenti malintenzionati di stabilire un punto di appoggio in un ambiente che può essere utilizzato per eseguire l'escalation dei privilegi (denominato anche privilegio innalzamento di livello) e alla fine e compromettere i servizi di dominio Active Directory.  
  
Questa sezione di questo documento è incentrata sulla descrizione dei meccanismi usati in genere dagli utenti malintenzionati per ottenere l'accesso all'infrastruttura e infine avviare attacchi con elevazione dei privilegi. Vedere anche le sezioni seguenti:  
  
-   [Riduzione della superficie di attacco Active Directory](../../../ad-ds/plan/security-best-practices/../../../ad-ds/plan/security-best-practices/../../../ad-ds/plan/security-best-practices/Reducing-the-Active-Directory-Attack-Surface.md) Suggerimenti dettagliati per la configurazione sicura di Active Directory.  
  
-   [Monitoraggio Active Directory per i segnali di compromissione](../../../ad-ds/plan/security-best-practices/Monitoring-Active-Directory-for-Signs-of-Compromise.md) Suggerimenti per facilitare il rilevamento della compromissione  
  
-   [Pianificazione della compromissione](../../../ad-ds/plan/security-best-practices/../../../ad-ds/plan/security-best-practices/Planning-for-Compromise.md) Approcci di alto livello per preparare gli attacchi all'infrastruttura da prospettive IT e aziendali  
  
> [!NOTE]  
> Sebbene questo documento sia incentrato sulla Active Directory e sui sistemi Windows che fanno parte di un dominio di servizi di dominio Active Directory, gli utenti malintenzionati si concentrano raramente esclusivamente su Active Directory e Windows. Negli ambienti con una combinazione di sistemi operativi, directory, applicazioni e repository di dati, è comune rilevare che anche i sistemi non Windows sono stati compromessi. Ciò è particolarmente vero se i sistemi forniscono un "Bridge" tra ambienti Windows e non Windows, ad esempio file server a cui si accede da client Windows e UNIX o Linux, directory che forniscono servizi di autenticazione a più sistemi operativi oppure Metadirectory che sincronizzano i dati tra directory diverse.  
>   
> I servizi di dominio Active Directory sono assegnati a causa delle funzionalità di gestione centralizzata di accesso e configurazione fornite non solo ai sistemi Windows, ma ad altri client. Qualsiasi altra directory o applicazione che fornisce servizi di gestione dell'autenticazione e della configurazione può e sarà destinata a utenti malintenzionati determinati. Sebbene questo documento sia incentrato sulle protezioni che possono ridurre la probabilità di un compromesso tra le installazioni di Active Directory, è necessario preparare anche tutte le organizzazioni che includono computer non Windows, directory, applicazioni o repository di dati. attacchi contro tali sistemi.  
  
## <a name="initial-breach-targets"></a>Destinazioni di violazione iniziali  
Nessuno intenzionalmente crea un'infrastruttura IT che espone l'organizzazione alla compromissione. Quando una foresta Active Directory viene costruita per la prima volta, è in genere intatta e corrente. Da anni passano e vengono acquisiti nuovi sistemi operativi e applicazioni, vengono aggiunti alla foresta. Poiché i vantaggi della gestibilità offerti da Active Directory vengono riconosciuti, più contenuti vengono aggiunti alla directory, più persone integrano i computer o le applicazioni con servizi di dominio Active Directory e i domini vengono aggiornati per supportare le nuove funzionalità offerte dal versioni correnti del sistema operativo Windows. Ciò che accade anche nel tempo, tuttavia, è che anche quando viene aggiunta una nuova infrastruttura, altre parti dell'infrastruttura potrebbero non essere mantenute e, di conseguenza, i sistemi e le applicazioni funzionano correttamente e pertanto non ricevono attenzione e le organizzazioni iniziano a dimenticare che non hanno eliminato l'infrastruttura legacy. In base a quanto illustrato nella valutazione di infrastrutture compromesse, nell'ambiente più vecchio, più grande e più complesso, più è probabile che esistano numerose istanze di vulnerabilità sfruttate di frequente.  
  
Indipendentemente dalla motivazione dell'autore dell'attacco, la maggior parte delle violazioni della sicurezza delle informazioni inizia con la compromissione di uno o due sistemi alla volta. Questi eventi iniziali, o punti di ingresso nella rete, sfruttano spesso vulnerabilità che potrebbero essere state corrette, ma non lo sono. Il [report di analisi delle violazioni dei dati di 2012 (DBIR)](http://www.verizonbusiness.com/resources/reports/rp_data-breach-investigations-report-2012_en_xg.pdf), che è uno studio annuale prodotto dal team di rischio Verizon in collaborazione con una serie di agenzie per la sicurezza nazionale e altre società, dichiara che il 96% degli attacchi è stato "non estremamente difficile" e che "il 97% delle violazioni è stato evitabile tramite controlli semplici o intermedi". Questi risultati possono essere una conseguenza diretta delle vulnerabilità comunemente sfruttate che seguono.  
  
### <a name="gaps-in-antivirus-and-antimalware-deployments"></a>Gap nelle distribuzioni antivirus e antimalware  
*Legge numero 8: uno scanner Malware obsoleto è solo marginalmente migliore rispetto a nessun scanner.* - [dieci leggi di sicurezza non modificabili (versione 2,0)](https://technet.microsoft.com/security/hh278941.aspx)  
  
L'analisi delle distribuzioni antivirus e antimalware delle organizzazioni spesso rivela un ambiente in cui la maggior parte delle workstation è configurata con il software antivirus e antimalware abilitato e corrente. Le eccezioni sono in genere workstation che si connettono raramente all'ambiente aziendale o ai dispositivi dei dipendenti per i quali il software antivirus e antimalware può essere difficile da distribuire, configurare e aggiornare.  
  
I popolamenti del server, tuttavia, tendono a essere protetti in modo meno coerente in molti ambienti compromessi. Come indicato nelle [indagini sulle violazioni dei dati 2012](http://www.verizonbusiness.com/resources/reports/rp_data-breach-investigations-report-2012_en_xg.pdf), il 94% di tutti i compromessi dei dati ha richiesto i server, che rappresenta un incremento del 18% nell'anno precedente e il 69% degli attacchi ha incorporato malware. Nei popolamenti del server non è insolito trovare che le installazioni di antivirus e antimalware siano configurate in modo non coerente, obsolete, non configurate o addirittura disabilitate. In alcuni casi, il software antivirus e antimalware è disabilitato dal personale amministrativo, ma in altri casi gli utenti malintenzionati disabilitano il software dopo la compromissione di un server tramite altre vulnerabilità. Quando il software antivirus e antimalware è disabilitato, gli utenti malintenzionati impostano malware sul server e si concentrano sulla propagazione della compromissione nel popolamento del server.  
  
È importante non solo garantire che i sistemi siano protetti con protezione da malware attuale e completa, ma anche per monitorare i sistemi per la disabilitazione o la rimozione di software antivirus e antimalware e per riavviare automaticamente la protezione disabilitato manualmente. Sebbene nessun software antivirus e antimalware possa garantire la prevenzione e il rilevamento di tutte le infezioni, un'implementazione di antivirus e antimalware correttamente configurata e distribuita può ridurre la probabilità di infezione.  
  
### <a name="incomplete-patching"></a>Applicazione di patch incompleta  
*Numero di legge 3: se non si è soddisfatti delle correzioni per la sicurezza, la rete non sarà per il tempo.* - [10 leggi non modificabili dell'amministrazione della sicurezza](https://technet.microsoft.com/library/cc722488.aspx)  
  
Microsoft rilascia i bollettini sulla sicurezza il secondo martedì di ogni mese, anche se in rare occasioni gli aggiornamenti della sicurezza vengono rilasciati tra gli aggiornamenti della sicurezza mensili (noti anche come aggiornamenti fuori banda) quando la vulnerabilità è determinata da porre rischio urgente per i sistemi dei clienti. Se una piccola impresa configura i computer Windows in modo da usare Windows Update per gestire l'applicazione di patch di sistema e applicazione o un'organizzazione di grandi dimensioni usa il software di gestione, ad esempio Microsoft endpoint Configuration Manager per distribuire le patch in base a informazioni dettagliate, i piani gerarchici, molti clienti applicano patch alle infrastrutture di Windows in modo relativamente tempestivo.  
  
Tuttavia, alcune infrastrutture includono solo i computer Windows e le applicazioni Microsoft e in ambienti compromessi è comune rilevare che la strategia di gestione delle patch dell'organizzazione contiene gap. I sistemi Windows in questi ambienti sono corretti in modo incoerente. I sistemi operativi non Windows vengono corretti sporadicamente, se disponibili. Le applicazioni commerciali fuori piano (culle) contengono vulnerabilità per le quali esistono patch, ma non sono state applicate. I dispositivi di rete sono spesso configurati con le credenziali predefinite della Factory e nessun aggiornamento del firmware dopo l'installazione. Le applicazioni e i sistemi operativi che non sono più supportati dai rispettivi fornitori vengono spesso mantenuti in esecuzione, nonostante il fatto che non possano più essere corretti da vulnerabilità. Ognuno di questi sistemi senza patch rappresenta un altro potenziale punto di ingresso per gli utenti malintenzionati.  
  
L'informatica di consumo ha introdotto ulteriori problemi in quanto i dispositivi di proprietà dei dipendenti vengono usati per accedere ai dati di proprietà dell'azienda e l'organizzazione potrebbe non essere in grado di controllare l'applicazione di patch e la configurazione dei dispositivi personali dei dipendenti. L'hardware di livello aziendale viene in genere fornito con le opzioni di configurazione e le funzionalità di gestione di livello aziendale, a meno che non si preferisca scegliere la personalizzazione individuale e la selezione dei dispositivi. L'hardware incentrato sui dipendenti offre una gamma più ampia di produttori, fornitori, funzionalità di protezione hardware, funzionalità di sicurezza del software, funzionalità di gestione e opzioni di configurazione e molte funzionalità aziendali possono essere completamente assenti.  
  
#### <a name="patch-and-vulnerability-management-software"></a>Software di gestione delle patch e delle vulnerabilità  
Se è presente un sistema di gestione delle patch efficace per i sistemi Windows e le applicazioni Microsoft, parte della superficie di attacco creata dalle vulnerabilità senza patch è stata risolta. Tuttavia, a meno che i sistemi non Windows, le applicazioni non Microsoft, l'infrastruttura di rete e i dispositivi dei dipendenti siano sempre aggiornati sulle patch e su altre correzioni, l'infrastruttura rimane vulnerabile. In alcuni casi, il fornitore di un'applicazione può offrire funzionalità di aggiornamento automatico; in altre, potrebbe essere necessario definire un approccio per recuperare e applicare periodicamente patch e altre correzioni.
  
### <a name="outdated-applications-and-operating-systems"></a>Applicazioni e sistemi operativi obsoleti  
*"Non è possibile aspettarsi un sistema operativo di sei anni per proteggersi da un attacco di sei mesi."* -Information Security Professional con 10 anni di esperienza nella protezione delle installazioni aziendali  
  
Sebbene "Get Current, Rest Current" possa sembrare una frase di marketing, i sistemi operativi e le applicazioni obsoleti creano rischi per le infrastrutture IT di molte organizzazioni. Un sistema operativo rilasciato in 2003 potrebbe essere ancora supportato dal fornitore e fornito con aggiornamenti per risolvere le vulnerabilità, ma il sistema operativo potrebbe non contenere le funzionalità di sicurezza aggiunte nelle versioni più recenti del sistema operativo. I sistemi obsoleti possono anche richiedere l'indebolimento di determinate configurazioni di sicurezza di servizi di dominio Active Directory per supportare le funzionalità meno avanzate di tali computer.  
  
Le applicazioni scritte per l'utilizzo di protocolli di autenticazione legacy da parte dei fornitori che non supportano più l'applicazione in genere non possono essere riattrezzate per supportare meccanismi di autenticazione più avanzati. Tuttavia, il dominio Active Directory di un'organizzazione può ancora essere configurato per archiviare gli hash di LAN Manager o in modo reversibile le password crittografate per supportare tali applicazioni. Le applicazioni scritte prima dell'introduzione di sistemi operativi più recenti potrebbero non funzionare correttamente o in tutti i sistemi operativi correnti, richiedendo alle organizzazioni di gestire sistemi meno recenti e meno recenti e, in alcuni casi, hardware e software completamente non supportati.  
  
Anche nei casi in cui le organizzazioni hanno aggiornato i controller di dominio a Windows Server 2012, Windows Server 2008 R2 o Windows Server 2008, è tipico trovare parti significative del popolamento del server membro per l'esecuzione di Windows Server 2003, Windows Server 2000 o Windows NT Server 4,0 (che non sono completamente supportati). Più a lungo un'organizzazione gestisce i sistemi di invecchiamento, maggiore è la disparità tra i set di funzionalità e più probabile diventa che i sistemi di produzione non saranno supportati. Inoltre, più a lungo viene mantenuta una foresta Active Directory, più si osserveranno i sistemi e le applicazioni legacy nei piani di aggiornamento. Questo può significare che un singolo computer che esegue una singola applicazione può introdurre vulnerabilità a livello di dominio o di foresta, perché Active Directory è configurato per supportare i protocolli e i meccanismi di autenticazione legacy.  
  
Per eliminare i sistemi e le applicazioni legacy, è necessario innanzitutto concentrarsi sull'identificazione e la catalogazione di questi ultimi, quindi su come determinare se aggiornare o sostituire l'applicazione o l'host. Sebbene possa essere difficile trovare le sostituzioni per applicazioni altamente specializzate per le quali non è disponibile alcun supporto né un percorso di aggiornamento, potrebbe essere possibile utilizzare un concetto denominato "distruzione creativa" per sostituire l'applicazione legacy con una nuova applicazione che fornisce la funzionalità necessaria. La [pianificazione della compromissione](../../../ad-ds/plan/security-best-practices/../../../ad-ds/plan/security-best-practices/Planning-for-Compromise.md) è descritta più dettagliatamente nella sezione "pianificazione della compromissione" più avanti in questo documento.  
  
### <a name="misconfiguration"></a>Configurazione  
*Legge numero quattro: non è molto vantaggioso installare correzioni di sicurezza in un computer che non è mai stato protetto per iniziare.* - [10 leggi non modificabili dell'amministrazione della sicurezza](https://technet.microsoft.com/library/cc722488.aspx)  
  
Anche negli ambienti in cui i sistemi vengono in genere mantenuti aggiornati e con patch, in genere si identificano gap o configurazioni errate nel sistema operativo, le applicazioni in esecuzione nei computer e Active Directory. Alcune configurazioni errate espongono solo il computer locale alla compromissione, ma dopo che un computer è di proprietà, gli utenti malintenzionati si concentrano in genere sull'ulteriore propagazione della compromissione tra altri sistemi e infine Active Directory. Di seguito sono riportate alcune delle aree comuni in cui vengono identificate le configurazioni che introducono il rischio.  
  
#### <a name="in-active-directory"></a>In Active Directory  
Gli account in Active Directory più comunemente interessati dagli utenti malintenzionati sono quelli membri dei gruppi con privilegi più elevati, ad esempio i membri dei gruppi Domain Admins (DA), Enterprise Admins (EA) o gli amministratori predefiniti (BA) in Active Directory. L'appartenenza di questi gruppi dovrebbe essere ridotta al minor numero possibile di account, in modo che la superficie di attacco di questi gruppi sia limitata. È anche possibile eliminare l'appartenenza "permanente" a questi gruppi privilegiati; ovvero è possibile implementare le impostazioni che consentono di popolare temporaneamente questi gruppi solo quando sono necessari i rispettivi privilegi a livello di dominio e di foresta. Quando si utilizzano account con privilegi elevati, è consigliabile utilizzarli solo su sistemi designati e protetti, ad esempio controller di dominio o host amministrativi protetti. Per [ridurre la superficie di attacco di Active Directory](../../../ad-ds/plan/security-best-practices/../../../ad-ds/plan/security-best-practices/../../../ad-ds/plan/security-best-practices/Reducing-the-Active-Directory-Attack-Surface.md), sono disponibili informazioni dettagliate che consentono di implementare tutte queste configurazioni.  
  
Quando si valuta l'appartenenza dei gruppi con privilegi più elevati in Active Directory, in genere si rileva un'appartenenza eccessiva a tutti e tre i gruppi con privilegi più elevati. In alcuni casi, le organizzazioni hanno dozzine, persino centinaia di account nei gruppi DA. In altri casi, le organizzazioni inseriscono gli account direttamente nei gruppi di amministratori predefiniti, pensando che il gruppo sia "meno privilegiato" rispetto al gruppo DAs. Non è. Spesso si trovano alcuni membri permanenti del gruppo EA nel dominio radice della foresta, nonostante il fatto che i privilegi EA siano raramente e temporaneamente necessari. Anche la ricerca di un account amministrativo giornaliero di un utente IT in tutti e tre i gruppi è comune, anche se si tratta di una configurazione con ridondanza efficace. Come descritto in [riduzione della superficie di attacco Active Directory](../../../ad-ds/plan/security-best-practices/../../../ad-ds/plan/security-best-practices/../../../ad-ds/plan/security-best-practices/Reducing-the-Active-Directory-Attack-Surface.md), se un account è un membro permanente di uno di questi gruppi o di tutti questi gruppi, l'account può essere usato per compromettere e persino eliminare l'ambiente di servizi di dominio Active Directory e i sistemi e gli account gestiti dal servizio it. Per [ridurre la superficie di attacco Active Directory](../../../ad-ds/plan/security-best-practices/../../../ad-ds/plan/security-best-practices/../../../ad-ds/plan/security-best-practices/Reducing-the-Active-Directory-Attack-Surface.md), sono disponibili raccomandazioni per la configurazione sicura e l'uso di account con privilegi in Active Directory.  
  
#### <a name="on-domain-controllers"></a>Nei controller di dominio  
Quando si valutano i controller di dominio, è possibile trovarli spesso configurati e gestiti in modo diverso rispetto ai server membri. I controller di dominio a volte eseguono le stesse applicazioni e utilità installate nei server membri, non perché sono necessarie nei controller di dominio, ma poiché le applicazioni fanno parte di una build standard. Queste applicazioni possono fornire funzionalità minime nei controller di dominio, ma aggiungere significativamente alla superficie di attacco richiedendo un'impostazione di configurazione che apra le porte, crei account di servizio con privilegi elevati o conceda l'accesso al sistema da parte degli utenti che non deve connettersi a un controller di dominio per scopi diversi dall'autenticazione e dall'applicazione Criteri di gruppo. In alcune violazioni, gli utenti malintenzionati hanno utilizzato strumenti già installati nei controller di dominio non solo per accedere ai controller di dominio, ma per modificare o danneggiare il database di servizi di dominio Active Directory.  
  
Quando si estraggono le impostazioni di configurazione di Internet Explorer nei controller di dominio, si noterà che gli utenti hanno eseguito l'accesso con account con livelli di privilegio elevati in Active Directory e hanno usato gli account per accedere a Internet e Intranet dal dominio controller. In alcuni casi, gli account hanno configurato le impostazioni di Internet Explorer nei controller di dominio per consentire il download del contenuto Internet e le utilità freeware sono state scaricate da siti Internet e installate nei controller di dominio. La funzionalità sicurezza avanzata di Internet Explorer è abilitata per gli utenti e gli amministratori per impostazione predefinita, ma spesso si osserva che è stata disabilitata per gli amministratori. Quando un account con privilegi elevati accede a Internet e Scarica il contenuto in qualsiasi computer, il computer viene messo a rischio grave. Quando il computer è un controller di dominio, viene messa a rischio l'intera installazione di servizi di dominio Active Directory.  
  
##### <a name="protecting-domain-controllers"></a>Protezione di controller di dominio  
I controller di dominio devono essere considerati componenti di infrastruttura critici, protetti in modo più rigoroso e configurati in modo più rigido rispetto ai server di file, di stampa e di applicazioni. I controller di dominio non devono eseguire alcun software che non è necessario per il funzionamento del controller di dominio o non protegge il controller di dominio dagli attacchi. I controller di dominio non devono essere autorizzati ad accedere a Internet e le impostazioni di sicurezza devono essere configurate e applicate da oggetti Criteri di gruppo (GPO). Indicazioni dettagliate per l'installazione, la configurazione e la gestione sicure dei controller di dominio sono fornite nella [protezione dei controller di dominio da attacchi](../../../ad-ds/plan/security-best-practices/Securing-Domain-Controllers-Against-Attack.md).  
  
#### <a name="within-the-operating-system"></a>All'interno del sistema operativo  
*Legge numero due: se un utente malintenzionato può modificare il sistema operativo nel computer, non è più il computer.* - [dieci leggi di sicurezza non modificabili (versione 2,0)](https://technet.microsoft.com/security/hh278941.aspx)  
  
Sebbene alcune organizzazioni creino configurazioni di base per server di tipi diversi e consentano una personalizzazione limitata del sistema operativo dopo l'installazione, l'analisi di ambienti compromessi spesso rileva un numero elevato di server distribuiti in un modalità ad hoc e configurata manualmente e in modo indipendente. Le configurazioni tra due server che eseguono la stessa funzione possono essere completamente diverse, in cui nessuno dei due server è configurato in modo sicuro. Viceversa, le linee di base di configurazione del server possono essere applicate in modo coerente, ma anche configurate in modo coerente. ovvero i server sono configurati in modo da creare la stessa vulnerabilità in tutti i server di un determinato tipo. La configurazione errata include procedure come la disabilitazione delle funzionalità di sicurezza, la concessione di diritti eccessivi e le autorizzazioni per gli account (in particolare gli account di servizio), l'utilizzo di credenziali locali identiche tra i sistemi e l'installazione di applicazioni e utilità non autorizzate che creano vulnerabilità proprie.  
  
##### <a name="disabling-security-features"></a>Disabilitazione delle funzionalità di sicurezza  
In alcuni casi le organizzazioni disabilitano Windows Firewall con sicurezza avanzata (WFAS) a una convinzione che WFAS è difficile da configurare o richiede una configurazione a elevato utilizzo di lavoro. Tuttavia, a partire da Windows Server 2008, quando un ruolo o una funzionalità è installata in un server, viene configurata per impostazione predefinita con i privilegi minimi necessari per il funzionamento del ruolo o della funzionalità e la Windows Firewall viene configurata automaticamente per supportare il ruolo funzionalità o. Disabilitando WFAS (e non usando un altro firewall basato su host al suo posto), le organizzazioni aumentano la superficie di attacco dell'intero ambiente Windows. I firewall perimetrali forniscono una protezione contro gli attacchi che hanno come destinazione direttamente un ambiente da Internet, ma non forniscono alcuna protezione dagli attacchi che sfruttano altri vettori di attacco, ad esempio attacchi [di tipo drive-by-download](https://www.microsoft.com/security/sir/glossary/drive-by-download-sites.aspx) , o attacchi che provengono da altri sistemi compromessi sulla Intranet.  
  
Le impostazioni di controllo dell'account utente (UAC) sono talvolta disabilitate nei server perché il personale amministrativo trova le richieste intrusive. Sebbene [supporto tecnico Microsoft articolo 2526083](https://support.microsoft.com/kb/2526083) descriva scenari in cui il controllo dell'account utente può essere disabilitato in Windows Server, a meno che non si esegua un'installazione dei componenti di base del server (in cui UAC è disabilitato da progettazione), non disabilitare il controllo dell'account utente nei server senza attenta considerazione e ricerca.  
  
In altri casi, le impostazioni del server sono configurate per i valori meno sicuri, perché le organizzazioni applicano le impostazioni di configurazione del server obsolete ai nuovi sistemi operativi, ad esempio applicando le basi di riferimento di Windows Server 2003 ai computer che eseguono Windows Server 2012, Windows Server 2008 R2 o Windows Server 2008, senza modificare le linee di base in modo da riflettere le modifiche apportate al sistema operativo. Anziché portare le linee di base del server obsolete nei nuovi sistemi operativi, quando si distribuisce un nuovo sistema operativo, esaminare le modifiche di sicurezza e le impostazioni di configurazione per assicurarsi che le impostazioni implementate siano applicabili e appropriate per il nuovo sistema operativo.  
  
##### <a name="granting-excessive-privilege"></a>Concessione di privilegi eccessivi  
In quasi tutti gli ambienti che sono stati valutati, il privilegio eccessivo viene concesso agli account locali e basati su dominio nei sistemi Windows. Agli utenti vengono concessi diritti di amministratore locale per le workstation, i server membri eseguono i servizi configurati con diritti superiori a quelli necessari per il funzionamento e i gruppi di amministratori locali nel popolamento del server contengono dozzine o addirittura centinaia di account locali e di dominio. La compromissione di un solo account con privilegi in un computer consente agli utenti malintenzionati di compromettere gli account di tutti gli utenti e i servizi che accedono al computer e di raccogliere e sfruttare le credenziali per propagare la compromissione ad altri sistemi.  
  
Sebbene gli attacchi pass-the-hash (PTH) e altri furti di credenziali siano oggi onnipresenti, questo è dovuto al fatto che sono disponibili strumenti gratuiti che rendono semplice e facile estrarre le credenziali di altri account con privilegi quando un utente malintenzionato ha acquisito l'amministratore. o accesso a livello di sistema a un computer. Anche senza gli strumenti che consentono di raccogliere le credenziali dalle sessioni di accesso, un utente malintenzionato con accesso privilegiato a un computer può installare facilmente i logger di tasti che acquisiscono le sequenze di tasti, le schermate e il contenuto degli Appunti. Un utente malintenzionato con accesso con privilegi a un computer può disabilitare il software antimalware, installare i rootkit, modificare i file protetti o installare malware nel computer per automatizzare gli attacchi o trasformare un server in un host [di download di unità](https://www.microsoft.com/security/sir/glossary/drive-by-download-sites.aspx) .  
  
Le tattiche usate per estendere una violazione oltre un singolo computer variano, ma la chiave per propagare la compromissione è l'acquisizione di un accesso con privilegi elevati a sistemi aggiuntivi. Riducendo il numero di account con accesso con privilegi a qualsiasi sistema, si riduce la superficie di attacco non solo del computer, ma la probabilità che un utente malintenzionato raccolga le credenziali importanti dal computer.  
  
##### <a name="standardizing-local-administrator-credentials"></a>Standardizzazione delle credenziali di amministratore locale  
Si è discusso a lungo tra gli specialisti della sicurezza in merito alla possibilità di rinominare gli account di amministratore locale nei computer Windows. Ciò che è importante per gli account di amministratore locale è se sono configurati con lo stesso nome utente e la stessa password in più computer.  
  
Se l'account amministratore locale viene denominato con lo stesso valore tra i server e la password assegnata all'account è configurata anche sullo stesso valore, gli utenti malintenzionati possono estrarre le credenziali dell'account in un computer in cui l'amministratore o l'accesso a livello di sistema è stato ottenuto. L'autore dell'attacco non deve inizialmente compromettere l'account Administrator; è necessario solo compromettere l'account di un utente membro del gruppo Administrators locale o di un account del servizio configurato per l'esecuzione come LocalSystem o con privilegi di amministratore. L'utente malintenzionato può quindi estrarre le credenziali per l'account Administrator e riprodurle in rete per accedere ad altri computer della rete.  
  
Fino a quando un altro computer dispone di un account locale con lo stesso nome utente e la stessa password (o hash della password) delle credenziali dell'account presentate, il tentativo di accesso ha esito positivo e l'autore dell'attacco ottiene l'accesso con privilegi al computer di destinazione. Nelle versioni correnti di Windows, l'account Administrator predefinito è [disabilitato per impostazione predefinita](https://technet.microsoft.com/library/cc753450.aspx), ma nei sistemi operativi legacy l'account è abilitato per impostazione predefinita.  
  
> [!NOTE]  
> Alcune organizzazioni hanno intenzionalmente configurato gli account di amministratore locale per essere abilitati nella convinzione che questo fornisca un "failsafe" nel caso in cui tutti gli altri account con privilegi siano bloccati da un sistema. Tuttavia, anche se l'account Administrator locale è disabilitato e non sono disponibili altri account che possono abilitare l'account o accedere al sistema con privilegi di amministratore, il sistema può essere avviato in modalità provvisoria e l'account amministratore locale predefinito può essere riabilitato, come descritto nell' [articolo supporto tecnico Microsoft 814777](https://support.microsoft.com/kb/814777). Inoltre, se il sistema applica correttamente gli oggetti Criteri di gruppo, è possibile modificare un oggetto Criteri di gruppo (temporaneamente) per riattivare l'account Administrator oppure è possibile configurare gruppi limitati per aggiungere un account basato su dominio al gruppo Administrators locale. Le riparazioni possono essere eseguite e l'account Administrator può essere disabilitato nuovamente. Per evitare efficacemente un compromesso laterale che utilizza le credenziali dell'account amministratore locale predefinito, è necessario configurare nomi utente e password univoci per gli account di amministratore locale. Per distribuire password univoche per gli account amministratore locale tramite un oggetto Criteri di gruppo, vedere la [soluzione per la gestione della password dell'account amministratore predefinito tramite l'oggetto Criteri](https://technet.microsoft.com/mt227395.aspx) di gruppo in TechNet.  
  
##### <a name="permitting-installation-of-unauthorized-applications"></a>Consentire l'installazione di applicazioni non autorizzate  
*Legge numero uno: se un utente malintenzionato è in grado di persuadere l'utente a eseguire il proprio programma nel computer, non è più solo il computer.* - [dieci leggi di sicurezza non modificabili (versione 2,0)](https://technet.microsoft.com/security/hh278941.aspx)  
  
Se un'organizzazione distribuisce impostazioni di base coerenti tra i server, l'installazione di applicazioni che non fanno parte del ruolo definito del server non deve essere consentita. Consentendo l'installazione di software che non fa parte della funzionalità designata di un server, i server sono esposti a installazione involontaria o dannosa del software che aumenta la superficie di attacco del server, introduce vulnerabilità dell'applicazione o cause instabilità del sistema.  
  
#### <a name="applications"></a>Applicazioni  
Come descritto in precedenza, le applicazioni vengono spesso installate e configurate per l'utilizzo di account a cui sono concessi più privilegi rispetto a quanto richiesto dall'applicazione. In alcuni casi, la documentazione dell'applicazione specifica che gli account del servizio devono essere membri del gruppo Administrators locale di un server o che devono essere configurati per l'esecuzione nel contesto di LocalSystem. Questo problema spesso non è dovuto al fatto che l'applicazione richiede tali diritti. Tuttavia, poiché la determinazione dei diritti e delle autorizzazioni necessarie per gli account di servizio di un'applicazione richiede investimenti in tempi e sforzi aggiuntivi. Se un'applicazione non viene installata con i privilegi minimi necessari per il funzionamento dell'applicazione e delle funzionalità configurate, il sistema viene esposto agli attacchi che sfruttano i privilegi dell'applicazione senza alcun attacco contro il sistema operativo stesso.  
  
### <a name="lack-of-secure-application-development-practices"></a>Mancanza di procedure di sviluppo di applicazioni sicure  
L'infrastruttura esiste per supportare i carichi di lavoro aziendali. Quando questi carichi di lavoro sono implementati in applicazioni personalizzate, è fondamentale assicurarsi che le applicazioni vengano sviluppate usando le procedure consigliate sicure. L'analisi delle cause principali di eventi imprevisti a livello aziendale spesso rivela che un compromesso iniziale viene effettuato tramite applicazioni personalizzate, in particolare quelle con connessione Internet. La maggior parte di questi compromessi viene eseguita tramite compromissione di attacchi noti, ad esempio attacchi SQL injection (SQLi) e attacchi XSS (cross-site scripting).  
  
SQL injection è una vulnerabilità dell'applicazione che consente all'input definito dall'utente di modificare un'istruzione SQL che viene passata al database per l'esecuzione. Questo input può essere fornito tramite un campo nell'applicazione, un parametro (ad esempio la stringa di query o un cookie) o altri metodi. Il risultato di questa operazione di inserimento è che l'istruzione SQL fornita al database è sostanzialmente diversa da quella prevista dallo sviluppatore. Si prenda, ad esempio, una query comune utilizzata per la valutazione di una combinazione di nome utente/password:  
  
`SELECT userID FROM users WHERE username = 'sUserName' AND password = 'sPassword'`  
  
Quando questo viene ricevuto dal server di database, indica al server di esaminare la tabella utenti e restituire qualsiasi record userID dove il nome utente e la password corrispondono a quelli forniti dall'utente (presumibilmente tramite un form di accesso di qualche tipo). Naturalmente, lo scopo dello sviluppatore in questo caso consiste nel restituire un record valido solo se l'utente può fornire un nome utente e una password corretti. Se uno dei due valori non è corretto, il server di database non sarà in grado di trovare un record corrispondente e restituirà un risultato vuoto.  
  
Il problema si verifica quando un utente malintenzionato fa qualcosa di imprevisto, ad esempio fornendo il proprio codice SQL al posto dei dati validi. Poiché SQL viene interpretato in tempo reale dal server di database, il codice inserito verrebbe elaborato come se lo sviluppatore lo avesse inserito. Se, ad esempio, l'autore dell'attacco ha immesso l' **amministratore** per l'ID utente e **XYZ** o **1 = 1** come password, l'istruzione risultante elaborata dal database sarà:  
  
`SELECT userID FROM users WHERE username = 'administrator' AND password = 'xyz' OR 1=1`  
  
Quando la query viene elaborata dal server di database, nella query verranno restituite tutte le righe della tabella perché 1 = 1 restituirà sempre true, pertanto non è rilevante se il nome utente e la password corretti sono noti o forniti. Il risultato finale nella maggior parte dei casi è che l'utente sarà connesso come primo utente nel database dell'utente. nella maggior parte dei casi, si tratta dell'utente amministratore.  
  
Oltre a eseguire semplicemente l'accesso, le istruzioni SQL in formato non corretto, ad esempio, possono essere utilizzate per aggiungere, eliminare o modificare dati o persino eliminare intere tabelle da un database. Nei casi più estremi in cui SQLi è combinato con privilegi eccessivi, è possibile eseguire i comandi del sistema operativo per consentire la creazione di nuovi utenti, scaricare gli strumenti di attacco o eseguire qualsiasi altra azione degli utenti malintenzionati che scelgono.  
  
Nello scripting tra siti, la vulnerabilità viene introdotta nell'output dell'applicazione. Un attacco inizia con un utente malintenzionato che fornisce dati non validi per l'applicazione, ma in questo caso i dati in formato non valido sono sotto forma di codice di script, ad esempio JavaScript, che verrà eseguito dal browser della vittima. L'exploit di una vulnerabilità XSS può consentire a un utente malintenzionato di eseguire qualsiasi funzione dell'applicazione di destinazione nel contesto dell'utente che ha avviato il browser. Gli attacchi XSS vengono in genere avviati da un messaggio di posta elettronica di phishing che invita l'utente a fare clic su un collegamento che si connette all'applicazione ed esegue il codice di attacco.  
  
Il servizio XSS viene spesso sfruttato negli scenari di banking e di e-commerce online in cui un utente malintenzionato può effettuare acquisti o trasferire denaro nel contesto dell'utente sfruttato. Nel caso di un attacco mirato a un'applicazione di gestione delle identità basata su Web personalizzata, può consentire a un utente malintenzionato di creare le proprie identità, modificare le autorizzazioni e i diritti e causare un compromesso di sistemi.  
  
Anche se una discussione completa sullo scripting tra siti e SQL injection esula dall'ambito di questo documento, il [progetto Open Web Application Security (OWASP)](https://www.owasp.org/index.php/Main_Page) pubblica un elenco dei primi 10 con una descrizione approfondita delle vulnerabilità e delle contromisure.  
  
Indipendentemente dall'investimento nella protezione dell'infrastruttura, se le applicazioni progettate e scritte in modo non corretto vengono distribuite in tale infrastruttura, l'ambiente viene reso vulnerabile agli attacchi. Anche le infrastrutture ben protette non possono spesso offrire contromisure efficaci per questi attacchi di applicazione. Con la composizione del problema, le applicazioni progettate in modo non corretto possono richiedere che agli account del servizio vengano concesse autorizzazioni eccessive per il funzionamento dell'applicazione.  
  
Il Microsoft Security Development Lifecycle (SDL) è costituito da un set di controlli di processo strutturale che consentono di migliorare la sicurezza iniziando in anticipo nella raccolta e nell'estensione del ciclo di vita dell'applicazione fino a quando non vengono rimosse le autorizzazioni. Questa integrazione dei controlli di sicurezza effettivi non solo è fondamentale dal punto di vista della sicurezza, ma è fondamentale assicurarsi che la sicurezza dell'applicazione sia di costo e pianificazione effettiva. La valutazione di un'applicazione per i problemi di sicurezza quando è efficace il completamento del codice richiede alle organizzazioni di prendere decisioni sulla sicurezza delle applicazioni solo prima o dopo la distribuzione dell'applicazione. Un'organizzazione può scegliere di risolvere i difetti dell'applicazione prima di distribuire l'applicazione in produzione, sostenere costi e ritardi o l'applicazione può essere distribuita nell'ambiente di produzione con difetti di protezione noti, esponendo l'organizzazione alla compromissione.  
  
Alcune organizzazioni rilasciano il costo totale per la risoluzione di un problema di sicurezza nel codice di produzione superiore a $10.000 per ogni problema e le applicazioni sviluppate senza un processo SDL efficace possono avere una media di più di dieci problemi di gravità elevata per 100.000 righe di codice. Nelle applicazioni di grandi dimensioni i costi si escalano rapidamente. Al contrario, molte aziende impostano un benchmark di meno di un problema per 100.000 righe di codice alla fase finale di revisione del codice del processo SDL e mirano a zero problemi nelle applicazioni ad alto rischio nell'ambiente di produzione.  
  
L'implementazione del processo SDL migliora la sicurezza grazie all'inclusione dei requisiti di sicurezza nelle fasi iniziali della raccolta e della progettazione di un'applicazione, che fornisce la modellazione delle minacce per le applicazioni richiede formazione e monitoraggio efficaci degli sviluppatori; e richiede standard e procedure chiare e coerenti per il codice. Il risultato finale di un processo SDL è un miglioramento significativo della protezione delle applicazioni, riducendo al tempo stesso i costi per lo sviluppo, la distribuzione, la gestione e la rimozione delle autorizzazioni di un'applicazione. Anche se una discussione dettagliata sulla progettazione e l'implementazione di SDL esula dall'ambito di questo documento, consultare il [ciclo di vita dello sviluppo della sicurezza Microsoft](https://www.microsoft.com/security/sdl/default.aspx) per istruzioni e informazioni dettagliate.  
  


